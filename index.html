
<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Ù†Ù…Ø§Ø² Ø¨Ù‡ Ø§ÙÙ‚ Ù…Ø´Ù‡Ø¯</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root{
      --bg:#0f172a; --panel:#1e293b; --muted:#94a3b8; --text:#e2e8f0;
      --brand:#93c5fd; --ok:#22c55e; --warn:#f59e0b; --bad:#ef4444; --chip:#334155;
      --ring:#60a5fa;
    }
    
    .light-theme {
      --bg:#cae1e2; --panel:#cadfe0; --muted:#64748b; --text:#1e293b;
      --brand:#3b82f6; --ok:#10b981; --warn:#f59e0b; --bad:#ef4444; --chip:#e2e8f0;
      --ring:#3bf679;
    }
    *{ box-sizing:border-box; }
    body{ margin:0; font-family:system-ui, Tahoma; background:var(--bg); color:var(--text); }
    a{ color:var(--brand); text-decoration:none; }
    .container{ max-width:980px; margin:0 auto; padding:24px; }
    header{ display:flex; flex-direction:column; gap:12px; margin-bottom:16px; }
    nav{ display:flex; gap:8px; flex-wrap:wrap; justify-content:center; }
    nav a{ padding:8px 10px; border-radius:10px; background:var(--chip); color:var(--text); transition:transform .12s ease, background .2s ease; }
    nav a:hover{ transform:translateY(-1px); background:#3a4a63; }
    h1{ margin:0; font-size:22px; }
    h2{ margin:12px 0 16px; font-size:20px; }
    .toolbar{ display:flex; flex-wrap:wrap; align-items:center; justify-content:center; margin-bottom:16px; gap:6px; }
    
    .btn {
      background: linear-gradient(135deg, #475b7a, #1e293b);
      color: var(--text);
      border: 1px solid rgba(255,255,255,0.08);
      padding: 8px 14px;
      border-radius: 12px;
      cursor: pointer;
      font-size: 15px;
      font-weight: 600;
      letter-spacing: .3px;
      transition: all .2s ease;
      backdrop-filter: blur(4px);
    }
    .btn:hover {
      transform: translateY(-2px);
      background: linear-gradient(135deg, #475569, #334155);
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    .light-theme .btn {
      background: linear-gradient(135deg, #e2e8f0, #f1f5f9);
      border: 1px solid rgba(0,0,0,0.08);
      color: #1e293b;
    }
    .light-theme .btn:hover {
      background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
    }

    .btn:disabled{ opacity:.6; cursor:not-allowed; transform:none; }
    .btn.primary{ background:var(--ok); color:#0b141e; }
    .grid{ display:grid; gap:12px; }
    /* Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¯Ø³Ú©ØªØ§Ù¾: Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø±ÙˆØ² Ù…Ø«Ù„ Ù‚Ø¨Ù„ */
    .days{ grid-template-columns: repeat(auto-fill, minmax(180px,1fr)); }
    .card{ 
      background:var(--panel); 
      border-radius:14px; 
      padding:14px; 
      box-shadow:0 6px 18px rgba(0,0,0,.25); 
      border:1px solid rgba(148,163,184,.08);
      backdrop-filter: blur(8px);
    }
    .light-theme .card {
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      border: 1px solid rgba(0,0,0,0.05);
    }
    .day-card{ 
      display:block; 
      color:var(--text); 
      position:relative;
      background: rgba(255,255,255,0.05);
      transition: all 0.3s ease;
    }
    .light-theme .day-card {
      background: rgba(255,255,255,0.7);
    }
    .day-card:hover{ transform:translateY(-1px); }
    .day-card.today{ outline:2px solid var(--ring); box-shadow:0 0 0 4px rgba(96,165,250,.15), 0 6px 18px rgba(0,0,0,.28); }
    .day-title{ font-weight:800; margin-bottom:6px; }
    .muted{ color:var(--muted); font-size:13px; }
    .rows{ display:grid; gap:10px; }
    .row{
      display:grid;
      grid-template-columns: 1fr auto auto 1.4fr; /* Ù†Ø§Ù… | Ø²Ù…Ø§Ù† Ø§Ø°Ø§Ù† | Ø¯Ú©Ù…Ù‡ | ÙˆØ¶Ø¹ÛŒØª */
      gap:10px; align-items:center; padding:10px 12px;
      background:rgba(255,255,255,.02); border:1px solid rgba(148,163,184,.08); border-radius:12px;
    }
    .num{ font-variant-numeric: tabular-nums; letter-spacing:.2px; }
    .chip{ background:var(--chip); border-radius:999px; padding:4px 10px; font-size:12px; }
    .stat-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap:8px; margin-bottom:16px; }
    .stat .label{ color:var(--muted); font-size:13px; margin-bottom:6px; }
    .stat .value{ font-size:22px; font-weight:800; }
    .inline{ display:inline-flex; gap:8px; align-items:center; }
    .flex{ display:flex; }
    .gap8{ gap:8px; } .gap12{ gap:12px; }
    .hidden{ display:none; } .hr{ height:1px; background:#233044; margin:12px 0; }
    .danger{ color:var(--bad); } .success{ color:#22c55e; } .warn{ color:var(--warn); }
    .center{ text-align:center; } .wrap{ white-space: pre-wrap; }
    canvas{ background:transparent; }

    /* Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ú¯Ø²Ø§Ø±Ø´ Ù‡Ø± Ù†Ù…Ø§Ø² + Ù†Ù…ÙˆØ¯Ø§Ø± Ø¯Ø§ÛŒØ±Ù‡â€ŒØ§ÛŒ */
    .prayer-report{
      display:grid; grid-template-columns: auto 160px; align-items:center; gap:12px;
    }
    .prayer-report .chips{ display:flex; flex-wrap:wrap; gap:8px; }

    /* Ù…ÙˆØ¨Ø§ÛŒÙ„: Ø±ÙˆØ²Ù‡Ø§ Ø¯Ø± Ø¯Ùˆ Ø±Ø¯ÛŒÙ Ø¨Ø§ Ø§Ø³Ú©Ø±ÙˆÙ„ Ø§ÙÙ‚ÛŒ */
    @media (max-width: 480px) {
  .container { padding: 12px; }
  h1 { font-size: 18px; }
  h2 { font-size: 16px; margin: 8px 0 12px; }
  .card { padding: 10px; border-radius: 12px; }
  .stat .value { font-size: 18px; }
  .inline { flex-wrap: wrap; }
  .btn { font-size: 13px; padding: 5px 8px; }

  /* âœ… Ø¯Ùˆ Ø³ØªÙˆÙ†ØŒ Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¹Ù…ÙˆØ¯ÛŒ */
  .days{
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 10px;
    /* Ù‡Ø± Ú†ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø§Ø³Ú©Ø±ÙˆÙ„ Ø§ÙÙ‚ÛŒ Ø¨ÙˆØ¯ Ø­Ø°Ù/Ø§ÙˆÙØ±Ø±Ø§ÛŒØ¯ Ø´Ø¯ */
    overflow-x: visible;
  }

  .day-card{ /* Ø§Ø³Ù†Ù¾ ØºÛŒØ±ÙØ¹Ø§Ù„ Ø´ÙˆØ¯ */
    scroll-snap-align: none;
  }

  .prayer-report{ grid-template-columns: 1fr; }
}



.hamburger {
  background: none;
  border: none;
  cursor: pointer;
  display: flex;
  flex-direction: column;
  gap: 5px;
  padding: 10px;
  margin-left: auto;
}
.hamburger span {
  width: 24px;
  height: 3px;
  background: var(--text);
  border-radius: 2px;
  transition: all 0.3s ease;
}

#sound-btn {
    font-size: 20px;      /* Ø¨Ø²Ø±Ú¯â€ŒØªØ± Ø´Ø¯Ù† Ø´Ú©Ù„Ú© */
    background: none;     /* Ø­Ø°Ù Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ */
    border: none;         /* Ø­Ø°Ù Ú©Ø§Ø¯Ø± */
    cursor: pointer;      /* ØªØºÛŒÛŒØ± Ù…Ø§ÙˆØ³ Ø¨Ù‡ Ø¯Ø³Øª */
  }

  #sound-btn:focus {
    outline: none;        /* Ø­Ø°Ù Ø­Ø§Ø´ÛŒÙ‡ Ø¢Ø¨ÛŒ Ø¨Ø¹Ø¯ Ø§Ø² Ú©Ù„ÛŒÚ© */
  }

  </style>
</head>
<body>
  <div class="container">
    <header>
      <div style="display:flex; justify-content:space-between; align-items:center; width:100%;">
        <h1></h1>
        <button id="tools-btn" class="hamburger" aria-label="Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§">
          <span></span>
          <span></span>
          <span></span>
        </button>        
      </div>
      <nav>
        <a href="#" id="nav-days">Ø±ÙˆØ²Ù‡Ø§</a>
        <a href="#" id="nav-report">Ú¯Ø²Ø§Ø±Ø´ Û· Ø±ÙˆØ²Ù‡</a>
      </nav>
    </header>
    <audio id="bg-music" loop>
      <source src="https://v.delgarm.com/mp3/804/2023/10/20/65324f5562985.mp3" type="audio/mpeg">
      Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø§Ø² ØµØ¯Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
    </audio>
    
    <!-- Tools Menu -->
    <div id="tools-menu" class="hidden" style="position:fixed; top:0; right:-300px; width:300px; height:100vh; background:var(--panel); z-index:1000; transition:transform 0.3s ease; box-shadow:-5px 0 15px rgba(0,0,0,0.2); padding:20px; overflow-y:auto;">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
        <h2 style="margin:0;">Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§</h2>
        <button id="close-tools" class="btn" style="padding:5px 10px;">Ã—</button>
      </div>
      <div class="grid" style="gap:10px;">
        <button class="btn" id="salawat-counter-btn" style="text-align:right; justify-content:flex-end;">
          <span>Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ ØµÙ„ÙˆØ§Øª</span>
        </button>
        <button class="btn" id="ziyarat-btn" style="text-align:right; justify-content:flex-end;">
          <span>Ø²ÛŒØ§Ø±Øª Ø¹Ø§Ø´ÙˆØ±Ø§</span>
        </button>
        <button class="btn" id="thirtyday-btn" style="text-align:right; justify-content:flex-end;">
          <span>Ú¯Ø²Ø§Ø±Ø´ Û³Û° Ø±ÙˆØ²Ù‡</span>
        </button>
        <button class="btn" id="help-btn" style="text-align:right; justify-content:flex-end;">
          <span>Ø±Ø§Ù‡Ù†Ù…Ø§</span>
        </button>
        <button class="btn" id="theme-btn" style="text-align:right; justify-content:flex-end;">
          <span>ØªØºÛŒÛŒØ± ØªÙ…</span>
        </button>
        <button onclick="playMusic()">Ù¾Ø®Ø´ ØµØ¯Ø§</button>
      </div>
    </div>
    <div id="tools-overlay" class="hidden" style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:999;"></div>

    <!-- ====== ØµÙØ­Ù‡ Ø±ÙˆØ²Ù‡Ø§ ====== -->
    <section id="view-days">
      <div class="toolbar">
        <button class="btn" id="btn-prev-month">Ù…Ø§Ù‡ Ù‚Ø¨Ù„</button>
        <button id="sound-btn" onclick="toggleSound()">ğŸ”‡</button>
        <button class="btn" id="btn-next-month">Ù…Ø§Ù‡ Ø¨Ø¹Ø¯</button>
      </div>      
      <div class="grid days" id="days-grid"></div>

      <div class="hr"></div>

      <div id="day-panel" class="hidden">
        <h2 id="day-title">â€”</h2>
        <div class="grid rows" id="prayers-rows"></div>
        <div class="muted" id="sunrise-line" style="margin-top:10px;"></div>
        <div class="muted" style="margin-top:10px;">Ø§ÙÙ‚ Ù…Ø´Ù‡Ø¯</div>
      </div>
    </section>

    <!-- ====== ØµÙØ­Ù‡ Ú¯Ø²Ø§Ø±Ø´ ====== -->
    <section id="view-report" class="hidden">
      <h2>Ú¯Ø²Ø§Ø±Ø´ Û· Ø±ÙˆØ² Ø§Ø®ÛŒØ±</h2>

      <div class="stat-grid">
        <div class="card stat">
          <div class="label">ØªØ¹Ø¯Ø§Ø¯ Ø«Ø¨Øªâ€ŒÙ‡Ø§</div>
          <div class="value" id="stat-total">0</div>
        </div>
        <div class="card stat">
          <div class="label">Ø§ÙˆÙ„â€ŒÙˆÙ‚Øª (â‰¤ Û±Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡)</div>
          <div class="value success" id="stat-ontime">0</div>
        </div>
        <div class="card stat">
          <div class="label">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† ØªØ§Ø®ÛŒØ± (Ø¯Ù‚ÛŒÙ‚Ù‡)</div>
          <div class="value danger" id="stat-avg">0</div>
        </div>
      </div>

      <!-- Ù†Ù…ÙˆØ¯Ø§Ø± Ù…ÛŒÙ„Ù‡â€ŒØ§ÛŒ Ø­Ø°Ù Ø´Ø¯Ø› Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ÛŒ Ø¯Ø§ÛŒØ±Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ù†Ù…Ø§Ø² Ø¯Ø± by-prayer ØªÙˆÙ„ÛŒØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯. -->
      <div class="grid" id="by-prayer"></div>
      <div class="muted" style="margin-top:10px;">ØªØ¹Ø§Ø±ÛŒÙ: Ø§ÙˆÙ„â€ŒÙˆÙ‚Øª â‰¤ Û±Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ØŒ Ù…Ø·Ù„ÙˆØ¨ â‰¤ Û¶Û° Ø¯Ù‚ÛŒÙ‚Ù‡ØŒ Ø¯ÛŒØ± &lt; Û´ Ø³Ø§Ø¹ØªØŒ Ø®ÛŒÙ„ÛŒ Ø¯ÛŒØ± â‰¥ Û´ Ø³Ø§Ø¹Øª</div>

      <div class="hr"></div>
      <div class="inline gap12">
        <button class="btn danger" id="btn-clear-logs">Ø­Ø°Ù Ù‡Ù…Ù‡ Ø«Ø¨Øªâ€ŒÙ‡Ø§</button>
        <span class="muted">Ø§ÛŒÙ† ÙÙ‚Ø· Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø°Ø®ÛŒØ±Ù‡â€ŒØ´Ø¯Ù‡ Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø±Ø§ Ù¾Ø§Ú© Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</span>
      </div>
    </section>
  </div>

  <!-- Tools Pages -->
  <div id="salawat-counter-page" class="hidden" style="position:fixed; top:0; left:0; width:100%; height:100%; background:var(--bg); z-index:1001; padding:20px;">
    <div style="max-width:600px; margin:0 auto; text-align:center;">
      <h2>Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ ØµÙ„ÙˆØ§Øª</h2>
      <div style="font-size:48px; margin:30px 0;" id="salawat-count">0</div>
      <button class="btn primary" id="salawat-add" style="font-size:18px; padding:12px 24px;">+ ØµÙ„ÙˆØ§Øª</button>
      <div style="margin-top:30px;">
        <button class="btn" id="back-from-salawat">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
      </div>
    </div>
  </div>

  <div id="ziyarat-page" class="hidden" style="position:fixed; top:0; left:0; width:100%; height:100%; background:var(--bg); z-index:1001; padding:20px; overflow-y:auto;">
    <div style="max-width:800px; margin:0 auto;">
      <h2 style="text-align:center;">Ø²ÛŒØ§Ø±Øª Ø¹Ø§Ø´ÙˆØ±Ø§</h2>
      <div style="line-height:2; text-align:justify; margin:20px 0;">
        <p>Ø§Ù„Ø³Ù‘ÙÙ„Ø§Ù…Ù Ø¹ÙÙ„ÙÛŒÙ’Ú©Ù ÛŒÙØ§ Ø£ÙØ¨Ø§ Ø¹ÙØ¨Ù’Ø¯ÙØ§Ù„Ù„Ù‘Ù°Ù‡ÙØŒ Ø§Ù„Ø³Ù‘ÙÙ„Ø§Ù…Ù Ø¹ÙÙ„ÙÛŒÙ’Ú©Ù ÛŒÙØ§ Ø§Ø¨Ù’Ù†Ù Ø±ÙØ³ÙÙˆÙ„Ù Ø§Ù„Ù„Ù‘Ù°Ù‡ÙØŒ Ø§Ù„Ø³Ù‘ÙÙ„Ø§Ù…Ù Ø¹ÙÙ„ÙÛŒÙ’Ú©Ù ÛŒØ§ Ø®ÙÛŒÙØ±ÙØ©Ù Ø§Ù„Ù„Ù‘Ù°Ù‡Ù ÙˆÙØ§Ø¨Ù’Ù†Ù Ø®ÙÛŒØ±ÙØªÙÙ‡ÙØŒ Ø§Ù„Ø³Ù‘ÙÙ„Ø§Ù…Ù Ø¹ÙÙ„ÙÛŒÙ’Ú©Ù ÛŒÙØ§ Ø§Ø¨Ù’Ù†Ù Ø£ÙÙ…ÙÛŒØ±Ù Ø§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙÛŒÙ†ÙØŒ ÙˆÙØ§Ø¨Ù’Ù†Ù Ø³ÙÛŒÙ‘ÙØ¯Ù Ø§Ù„Ù’ÙˆÙØµÙÛŒÙ‘ÙÛŒÙ†ÙØŒ Ø§ÙÙ„Ø³Ù‘ÙÙ„Ø§Ù…Ù Ø¹ÙÙ„ÙÛŒÙ’Ú©Ù ÛŒÙØ§Ø¨Ù’Ù†Ù ÙØ§Ø·ÙÙ…ÙØ©Ù Ø³ÙÛŒÙÙ‘Ø¯ÙØ©Ù Ù†ÙØ³Ø§Ø¡Ù Ø§Ù„Ù’Ø¹Ø§Ù„ÙÙ…ÛŒÙ†ÙØŒ Ø§ÙÙ„Ø³Ù‘ÙÙ„Ø§Ù…Ù Ø¹ÙÙ„ÙÛŒÙ’Ú©Ù ÛŒØ§ Ø«Ø§Ø±Ù Ø§Ù„Ù„Ù‘Ù‡Ù ÙˆÙ Ø§Ø¨Ù’Ù†Ù Ø«Ø§Ø±ÙÙ‡ØŒ ÙˆÙ Ø§Ù„Ù’ÙˆÙØªÙ’Ø±Ù Ø§Ù„Ù’Ù…ÙÙˆÙ’ØªÙÙˆØ±ÙØŒ Ø§ÙÙ„Ø³Ù‘ÙÙ„Ø§Ù…Ù Ø¹ÙÙ„ÙÛŒÙ’Ú©Ù ÙˆÙ Ø¹ÙÙ„ÙÙ‰ Ø§Ù„Ù’Ø§ÙØ±Ù’ÙˆØ§Ø­Ù Ø§Ù„Ù‘ÙØªÙ‰ Ø­ÙÙ„Ù‘ÙØªÙ’ Ø¨ÙÙÙÙ†Ø§Ø¦ÙÚ©ÙØŒ Ø¹ÙÙ„ÙÛŒÙ’Ú©ÙÙ…Ù’ Ù…ÙÙ†Ù‘Ù‰ Ø¬ÙÙ…ÛŒØ¹Ù‹Ø§ Ø³ÙÙ„Ø§Ù…Ù Ø§Ù„Ù„Ù‘Ù‡Ù Ø§ÙØ¨ÙØ¯Ù‹Ø§ Ù…Ø§ Ø¨ÙÙ‚ÛŒØªÙ ÙˆÙ Ø¨ÙÙ‚ÙÙ‰Ù Ø§Ù„Ù„Ù‘ÙÛŒÙ’Ù„Ù ÙˆÙ Ø§Ù„Ù†Ù‘ÙÙ‡Ø§Ø±ÙØŒ ÛŒØ§ Ø§ÙØ¨Ø§ Ø¹ÙØ¨Ù’Ø¯Ù Ø§Ù„Ù„Ù‘Ù‡Ù 

          Ù„ÙÙ‚ÙØ¯Ù’ Ø¹ÙØ¸ÙÙ…ÙØªÙ Ø§Ù„Ø±Ù‘ÙØ²ÙÛŒÙ‘ÙØ©ÙØŒ ÙˆÙ Ø¬ÙÙ„Ù‘ÙØªÙ’ ÙˆÙ Ø¹ÙØ¸ÙÙ…ÙØªÙ Ø§Ù„Ù’Ù…ÙØµÛŒØ¨ÙØ©Ù Ø¨ÙÚ©Ù Ø¹ÙÙ„ÙÛŒÙ’Ù†Ø§ ÙˆÙ Ø¹ÙÙ„Ù‰ Ø¬ÙÙ…ÛŒØ¹Ù Ø§ÙÙ‡Ù’Ù„Ù Ø§Ù„Ù’Ø§ÙØ³Ù’Ù„Ø§Ù…ÙØŒ ÙˆÙ Ø¬ÙÙ„Ù‘ÙØªÙ’ ÙˆÙ Ø¹ÙØ¸ÙÙ…ÙØªÙ’ Ù…ÙØµÛŒØ¨ÙØªÙÚ©Ù ÙÙÙ‰ Ø§Ù„Ø³Ù‘ÙÙ…Ø§ÙˆØ§ØªÙ Ø¹ÙÙ„Ù‰ Ø¬ÙÙ…ÛŒØ¹Ù Ø§ÙÙ‡Ù’Ù„Ù Ø§Ù„Ø³Ù‘ÙÙ…Ø§ÙˆØ§ØªÙØŒ ÙÙÙ„ÙØ¹ÙÙ†Ù Ø§Ù„Ù„Ù‘Ù‡Ù Ø§ÙÙ…Ù‘ÙØ©Ù‹ Ø§ÙØ³Ù‘ÙØ³ÙØªÙ’ Ø§ÙØ³Ø§Ø³Ù Ø§Ù„Ø¸Ù‘ÙÙ„Ù’Ù…Ù ÙˆÙ Ø§Ù„Ù’Ø¬ÙÙˆÙ’Ø±Ù Ø¹ÙÙ„ÙÛŒÙ’Ú©ÙÙ…Ù’ Ø§ÙÙ‡Ù’Ù„Ù Ø§Ù„Ù’Ø¨ÙÛŒÙ’ØªÙØŒ ÙˆÙ Ù„ÙØ¹ÙÙ†Ù Ø§Ù„Ù„Ù‘Ù‡Ù Ø§ÙÙ…Ù‘ÙØ©Ù‹ Ø¯ÙÙÙØ¹ÙØªÙ’Ú©ÙÙ…Ù’ Ø¹ÙÙ†Ù’ Ù…ÙÙ‚Ø§Ù…ÙÚ©ÙÙ…Ù’ØŒ ÙˆÙ Ø§ÙØ²Ø§Ù„ÙØªÙ’Ú©ÙÙ…Ù’ Ø¹ÙÙ†Ù’ Ù…ÙØ±Ø§ØªÙØ¨ÙÚ©ÙÙ…Ù Ø§Ù„Ù‘ÙØªÙ‰ Ø±ÙØªÙ‘ÙØ¨ÙÚ©ÙÙ…Ù Ø§Ù„Ù„Ù‘Ù‡Ù ÙÛŒÙ‡Ø§ØŒ ÙˆÙ Ù„ÙØ¹ÙÙ†Ù Ø§Ù„Ù„Ù‘Ù‡Ù Ø§ÙÙ…Ù‘ÙØ©Ù‹ Ù‚ÙØªÙÙ„ÙØªÙ’Ú©ÙÙ…Ù’ØŒ ÙˆÙ Ù„ÙØ¹ÙÙ†Ù Ø§Ù„Ù„Ù‘Ù‡Ù Ø§Ù„Ù’Ù…ÙÙ…ÙÙ‡ÙÙ‘Ø¯ÛŒÙ†Ù Ù„ÙÙ‡ÙÙ…Ù’ Ø¨ÙÙ€Ø§Ù„Ù‘ÙØªÙ…Ù’Ú©ÛŒÙ†Ù Ù…ÙÙ†Ù’ Ù‚ÙØªØ§Ù„ÙÚ©ÙÙ…Ù’ØŒ Ø¨ÙØ±ÙØ¦Ù’ØªÙ Ø§ÙÙ„ÙÙ‰ Ø§Ù„Ù„Ù‘Ù‡Ù ÙˆÙ Ø§ÙÙ„ÙÛŒÙ’Ú©ÙÙ…Ù’ Ù…ÙÙ†Ù’Ù‡ÙÙ…Ù’ ÙˆÙ Ù…ÙÙ†Ù’ Ø§ÙØ´Ù’ÛŒØ§Ø¹ÙÙ‡ÙÙ…Ù’ ÙˆÙ Ø§ÙØªÙ’Ø¨Ø§Ø¹ÙÙ‡ÙÙ…Ù’ ÙˆÙ Ø§ÙÙˆÙ’Ù„ÙÛŒØ§Ø¦ÙÙ‡ÙÙ…Ù’. ÛŒØ§ Ø§ÙØ¨Ø§ Ø¹ÙØ¨Ù’Ø¯Ù Ø§Ù„Ù„Ù‘Ù‡Ù 
          
          Ø§ÙÙ†Ù‘Ù‰ Ø³ÙÙ„Ù’Ù…ÙŒ Ù„ÙÙ…ÙÙ†Ù’ Ø³Ø§Ù„ÙÙ…ÙÚ©ÙÙ…Ù’ ÙˆÙ Ø­ÙØ±Ù’Ø¨ÙŒ Ù„ÙÙ…ÙÙ†Ù’ Ø­Ø§Ø±ÙØ¨ÙÚ©ÙÙ…Ù’ Ø§ÙÙ„Ù‰ ÛŒÙÙˆÙ’Ù…Ù Ø§Ù„Ù’Ù‚ÙÛŒØ§Ù…ÙØ©ÙØŒ ÙˆÙ Ù„ÙØ¹ÙÙ†Ù Ø§Ù„Ù„Ù‘Ù‡Ù Ø¢Ù„Ù Ø²ÛŒØ§Ø¯Ù ÙˆÙ Ø¢Ù„Ù Ù…ÙØ±Ù’ÙˆØ§Ù†ÙØŒ ÙˆÙ Ù„ÙØ¹ÙÙ†Ù Ø§Ù„Ù„Ù‘Ù‡Ù Ø¨ÙÙ†Ù‰ Ø§ÙÙ…ÙÛŒÙ‘ÙØ©Ù Ù‚Ø§Ø·ÙØ¨ÙÙ‡Ù‹ØŒ ÙˆÙ Ù„ÙØ¹ÙÙ†Ù Ø§Ù„Ù„Ù‘Ù‡Ù Ø§Ø¨Ù’Ù†Ù Ù…ÙØ±Ù’Ø¬Ø§Ù†ÙÙ‡ÙØŒ ÙˆÙ Ù„ÙØ¹ÙÙ†Ù Ø§Ù„Ù„Ù‘Ù‡Ù Ø¹ÙÙ…ÙØ±Ù Ø¨Ù’Ù†Ù Ø³ÙØ¹Ù’Ø¯ÙØŒ ÙˆÙ Ù„ÙØ¹ÙÙ†Ù Ø§Ù„Ù„Ù‘Ù‡Ù Ø´ÙÙ…Ù’Ø±Ø§Ù‹ØŒ ÙˆÙ Ù„ÙØ¹ÙÙ†Ù Ø§Ù„Ù„Ù‘Ù‡Ù Ø§ÙÙ…Ù‘ÙØ©Ù‹ Ø§ÙØ³Ù’Ø±ÙØ¬ÙØªÙ’ ÙˆÙ Ø§ÙÙ„Ø¬ÙÙ…ÙØªÙ’ ÙˆÙ ØªÙÙ†ÙÙ‚Ù‘ÙØ¨ÙØªÙ’ Ù„ÙÙ‚ÙØªØ§Ù„ÙÚ©Ù. Ø¨ÙØ§ÙØ¨Ù‰ Ø§ÙÙ†Ù’ØªÙ ÙˆÙ Ø§ÙÙ…Ù‘Ù‰ Ù„ÙÙ‚ÙØ¯Ù’ Ø¹ÙØ¸ÙÙ…Ù Ù…ÙØµØ§Ø¨Ù‰ Ø¨ÙÚ©ÙØŒ ÙÙØ§ÙØ³Ù’Ø§ÙÙ„Ù Ø§Ù„Ù„Ù‘Ù‡Ù Ø§Ù„Ù‘ÙØ°Ù‰ Ø§ÙÚ©Ù’Ø±ÙÙ…Ù Ù…ÙÙ‚Ø§Ù…ÙÚ©Ù ÙˆÙ Ø§ÙÚ©Ù’Ø±ÙÙ…ÙÙ†Ù‰ Ø¨ÙÚ©ÙØŒ Ø§ÙÙ†Ù’ ÛŒÙØ±Ù’Ø²ÙÙ‚ÙÙ†Ù‰ Ø·ÙÙ„ÙØ¨Ù Ø«Ø§Ø±ÙÚ©Ù Ù…ÙØ¹Ù Ø§ÙÙ…Ø§Ù…Ù Ù…ÙÙ†Ù’ØµÙÙˆØ±Ù Ù…ÙÙ†Ù’ Ø§ÙÙ‡Ù’Ù„Ù Ø¨ÙÛŒÙ’ØªÙ Ù…ÙØ­ÙÙ…Ù‘ÙØ¯Ù ØµÙÙ„Ù‘ÙÙ‰ Ø§Ù„Ù„Ù‘Ù‡Ù Ø¹ÙÙ„ÙÛŒÙ’Ù‡Ù ÙˆÙ Ø¢Ù„ÙÙ‡. Ø§ÙÙ„Ù„Ù‘Ù‡ÙÙ…Ù‘Ù Ø§Ø¬Ù’Ø¹ÙÙ„Ù’Ù†Ù‰ Ø¹ÙÙ†Ù’Ø¯ÙÚ©Ù ÙˆÙØ¬ÛŒÙ‡Ù‹Ø§ Ø¨ÙÙ€Ø§Ù„Ù’Ø­ÙØ³ÙÛŒÙ’Ù†Ù Ø¹ÙÙ„ÙÛŒÙ’Ù‡Ù Ø§Ù„Ø³Ù‘Ù„Ø§Ù…Ù ÙÙÙ‰ Ø§Ù„Ø¯Ù‘ÙÙ†Ù’ÛŒØ§ ÙˆÙ Ø§Ù„Ø§Ù’Ø®ÙØ±ÙØ©Ù. ÛŒØ§ Ø§ÙØ¨Ø§ Ø¹ÙØ¨Ù’Ø¯Ù Ø§Ù„Ù„Ù‘Ù‡Ù 
          
          Ø§ÙÙ†Ù‘Ù‰ Ø§ÙØªÙÙ‚ÙØ±Ù‘ÙØ¨Ù Ø§ÙÙ„ÙÙ‰ Ø§Ù„Ù„Ù‘Ù‡Ù ÙˆÙ Ø§ÙÙ„Ù‰ Ø±ÙØ³ÙÙˆÙ„ÙÙ‡ ÙˆÙ Ø§ÙÙ„Ù‰ Ø§ÙÙ…ÛŒØ±ÙØ§Ù„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÛŒÙ†ÙØŒ ÙˆÙ Ø§ÙÙ„Ù‰ ÙØ§Ø·ÙÙ…ÙØ©Ù ÙˆÙ Ø§ÙÙ„ÙÙ‰ Ø§Ù„Ù’Ø­ÙØ³ÙÙ†Ù ÙˆÙ Ø§ÙÙ„ÙÛŒÙ’Ú©Ù Ø¨ÙÙ…ÙÙˆØ§Ù„Ø§ØªÙÚ©ÙØŒ ÙˆÙ Ø¨ÙØ§Ù„Ù’Ø¨ÙØ±Ø¢Ø¦ÙØ©Ù Ù…ÙÙ…Ù‘ÙÙ†Ù’ Ù‚Ø§ØªÙÙ„ÙÚ©Ù ÙˆÙ Ù†ÙØµÙØ¨Ù Ù„ÙÚ©Ù Ø§Ù„Ù’Ø­ÙØ±Ù’Ø¨ÙØŒ ÙˆÙ Ø¨ÙØ§Ù„Ù’Ø¨ÙØ±Ø¢Ø¦ÙØ©Ù Ù…ÙÙ…Ù‘ÙÙ†Ù’ Ø§ÙØ³Ù‘ÙØ³Ù Ø§ÙØ³Ø§Ø³Ù Ø§Ù„Ø¸Ù‘ÙÙ„Ù’Ù…Ù ÙˆÙ Ø§Ù„Ù’Ø¬ÙÙˆÙ’Ø±Ù Ø¹ÙÙ„ÙÛŒÙ’Ú©ÙÙ…Ù’ØŒ ÙˆÙ Ø§ÙØ¨Ù’Ø±ÙØ§Ù Ø§ÙÙ„ÙÙ‰ Ø§Ù„Ù„Ù‘Ù‡Ù ÙˆÙ Ø§ÙÙ„Ù‰ Ø±ÙØ³ÙÙˆÙ„ÙÙ‡ Ù…ÙÙ…Ù‘ÙÙ†Ù’ Ø§ÙØ³Ù‘ÙØ³Ù Ø§ÙØ³Ø§Ø³Ù Ø°Ù„ÙÚ©ÙØŒ ÙˆÙ Ø¨ÙÙ†Ù‰ Ø¹ÙÙ„ÙÛŒÙ’Ù‡Ù Ø¨ÙÙ†Ù’ÛŒØ§Ù†ÙÙ‡ÙØŒ ÙˆÙ Ø¬ÙØ±Ù‰ ÙÙ‰ Ø¸ÙÙ„Ù’Ù…ÙÙ‡ ÙˆÙ Ø¬ÙÙˆÙ’Ø±ÙÙ‡ Ø¹ÙÙ„ÙÛŒÙ’Ú©ÙÙ…Ù’ ÙˆÙ Ø¹ÙÙ„Ù‰ Ø§ÙØ´Ù’ÛŒØ§Ø¹ÙÚ©ÙÙ…Ù’ 
          
          Ø¨ÙØ±ÙØ¦Ù’ØªÙ Ø§ÙÙ„ÙÙ‰ Ø§Ù„Ù„Ù‘Ù‡Ù ÙˆÙ Ø§ÙÙ„ÙÛŒÙ’Ú©ÙÙ…Ù’ Ù…ÙÙ†Ù’Ù‡ÙÙ…Ù’ØŒ ÙˆÙ Ø§ÙØªÙÙ‚ÙØ±Ù‘ÙØ¨Ù Ø§ÙÙ„ÙÙ‰ Ø§Ù„Ù„Ù‘Ù‡Ù Ø«ÙÙ…Ù‘Ù Ø§ÙÙ„ÙÛŒÙ’Ú©ÙÙ…Ù’ Ø¨ÙÙ…ÙÙˆØ§Ù„Ø§ØªÙÚ©ÙÙ…Ù’ ÙˆÙ Ù…ÙÙˆØ§Ù„Ø§Ø©Ù ÙˆÙÙ„ÛŒÙÙ‘Ú©ÙÙ…Ù’ØŒ ÙˆÙ Ø¨ÙØ§Ù„Ù’Ø¨ÙØ±Ø¢Ø¦ÙØ©Ù Ù…ÙÙ†Ù’ Ø§ÙØ¹Ù’Ø¯Ø§Ø¦ÙÚ©ÙÙ…Ù’ ÙˆÙ Ø§Ù„Ù†Ù‘Ø§ØµÙØ¨ÛŒÙ†Ù Ù„ÙÚ©ÙÙ…Ù Ø§Ù„Ù’Ø­ÙØ±Ù’Ø¨ÙØŒ ÙˆÙ Ø¨ÙØ§Ù„Ù’Ø¨ÙØ±Ø¢Ø¦ÙØ©Ù Ù…ÙÙ†Ù’ Ø§ÙØ´Ù’ÛŒØ§Ø¹ÙÙ‡ÙÙ…Ù’ ÙˆÙ Ø§ÙØªÙ’Ø¨Ø§Ø¹ÙÙ‡ÙÙ…Ù’. Ø§ÙÙ†Ù‘Ù‰ Ø³ÙÙ„Ù’Ù…ÙŒ Ù„ÙÙ…ÙÙ†Ù’ Ø³Ø§Ù„ÙÙ…ÙÚ©ÙÙ…Ù’ ÙˆÙ Ø­ÙØ±Ù’Ø¨ÙŒ Ù„ÙÙ…ÙÙ†Ù’ Ø­Ø§Ø±ÙØ¨ÙÚ©ÙÙ…Ù’ØŒ ÙˆÙ ÙˆÙÙ„ÙÙ‰Ù‘ÙŒ Ù„ÙÙ…ÙÙ†Ù’ ÙˆØ§Ù„Ø§Ú©ÙÙ…Ù’ ÙˆÙ Ø¹ÙØ¯ÙÙˆÙ‘ÙŒ Ù„ÙÙ…ÙÙ€Ù†Ù’ Ø¹Ù€Ø§Ø¯Ø§Ú©ÙÙ…Ù’ØŒ ÙÙØ§ÙØ³Ù’Ù€Ø§ÙÙ„Ù Ø§Ù„Ù„Ù‘Ù‡Ù Ø§Ù„Ù‘ÙØ°Ù‰ Ø§ÙÚ©Ù’Ø±ÙÙ…ÙÙ†Ù‰ Ø¨ÙÙ…ÙØ¹Ù’Ø±ÙÙÙØªÙÚ©ÙÙ…Ù’ ÙˆÙ Ù…ÙØ¹Ù’Ø±ÙÙÙØ©Ù Ø§ÙÙˆÙ’Ù„ÙÛŒØ§Ø¦ÙÚ©ÙÙ…Ù’ØŒ ÙˆÙ Ø±ÙØ²ÙÙ‚ÙÙ†ÙÙ€Ù‰ Ø§Ù„Ù’Ø¨ÙØ±Ø§Ø¦ÙÙ€Ø©Ù Ù…ÙÙ†Ù’ Ø§ÙØ¹Ù’Ø¯Ø§Ø¦ÙÚ©ÙÙ€Ù…Ù’ØŒ Ø§ÙÙ†Ù’ ÛŒÙØ¬Ù’Ø¹ÙÙ„ÙÙ†Ù‰ Ù…ÙØ¹ÙÚ©ÙÙ…Ù’ ÙÙÙ‰ Ø§Ù„Ø¯Ù‘ÙÙ†Ù’ÛŒØ§ ÙˆÙ Ø§Ù„Ø§Ù’Ø®ÙØ±ÙØ©ÙØŒ ÙˆÙ Ø§ÙÙ†Ù’ ÛŒÙØ«ÙØ¨ÙÙ‘ØªÙ Ù„Ù‰ Ø¹ÙÙ†Ù’Ø¯ÙÚ©ÙÙ…Ù’ Ù‚ÙØ¯ÙÙ…Ù ØµÙØ¯Ù’Ù‚Ù ÙÙÙ‰ Ø§Ù„Ø¯Ù‘ÙÙ†Ù’ÛŒØ§ ÙˆÙ Ø§Ù„Ø§Ù’Ø®ÙØ±ÙØ©Ù 
          
          ÙˆÙ Ø§ÙØ³Ù’Ø§ÙÙ„ÙÙ‡Ù Ø§ÙÙ†Ù’ ÛŒÙØ¨ÙÙ„ÙÙ‘ØºÙÙ†ÙÙ‰ Ø§Ù„Ù’Ù…ÙÙ‚Ø§Ù…Ù Ø§Ù„Ù’Ù…ÙØ­Ù’Ù…ÙÙˆØ¯Ù Ù„ÙÚ©ÙÙ…Ù’ Ø¹ÙÙ†Ù’Ø¯Ù Ø§Ù„Ù„Ù‘Ù‡ÙØŒ ÙˆÙ Ø§ÙÙ†Ù’ ÛŒÙØ±Ù’Ø²ÙÙ‚ÙÙ†Ù‰ Ø·ÙÙ„ÙØ¨Ù Ø«Ø§Ø±Ù‰ (Ø«Ø§Ø±ÙÚ©ÙÙ…Ù’) Ù…ÙØ¹Ù Ø§ÙÙ…Ø§Ù…Ù Ù‡ÙØ¯Ù‹Ù‰ (Ù…ÙÙ‡Ù’Ø¯Ù‰Ù‘Ù) Ø¸Ø§Ù‡ÙØ±Ù Ù†Ø§Ø·ÙÙ‚Ù Ø¨ÙÙ€Ø§Ù„Ù’Ø­ÙÙ‚ÙÙ‘ Ù…ÙÙ†Ù’Ú©ÙÙ…Ù’ØŒ ÙˆÙ Ø§ÙØ³Ù’Ø§ÙÙ„Ù Ø§Ù„Ù„Ù‘Ù‡Ù Ø¨ÙØ­ÙÙ‚ÙÙ‘Ú©ÙÙ…Ù’ ÙˆÙ Ø¨ÙØ§Ù„Ø´Ù‘ÙØ£Ù’Ù†Ù Ø§Ù„Ù‘ÙØ°Ù‰ Ù„ÙÚ©ÙÙ…Ù’ Ø¹ÙÙ†Ù’Ø¯ÙÙ‡ÙØŒ Ø§ÙÙ†Ù’ ÛŒÙØ¹Ù’Ø·ÙÛŒÙÙ†Ù‰ Ø¨ÙÙ…ÙØµØ§Ø¨Ù‰ Ø¨ÙÚ©ÙÙ…Ù’ Ø§ÙÙÙ’Ø¶ÙÙ„Ù Ù…Ø§ ÛŒÙØ¹Ù’Ø·Ù‰ Ù…ÙØµØ§Ø¨Ù‹Ø§ Ø¨ÙÙ…ÙÙ€ØµÛŒØ¨ÙØªÙÙ‡Ø› Ù…ÙØµÛŒØ¨ÙØ©Ù‹ Ù…Ø§ Ø§ÙØ¹Ù’Ø¸ÙÙ…ÙÙ‡Ø§ ÙˆÙ Ø§ÙØ¹Ù’Ø¸ÙÙ…Ù Ø±ÙØ²ÙÛŒÙ‘ÙØªÙÙ‡Ø§ ÙÙÙ‰ Ø§Ù„Ù’Ø§ÙØ³Ù’Ù„Ø§Ù…Ù ÙˆÙ ÙÙ‰ Ø¬ÙÙ…ÛŒØ¹Ù Ø§Ù„Ø³Ù‘ÙÙ…Ø§ÙˆØ§ØªÙ ÙˆÙ Ø§Ù„Ù’Ø§ÙØ±Ù’Ø¶Ù. Ø§ÙÙ„Ù„Ù‘Ù‡ÙÙ…Ù‘Ù Ø§Ø¬Ù’Ø¹ÙÙ„Ù’Ù†Ù‰ ÙÙ‰ Ù…ÙÙ‚Ø§Ù…Ù‰ Ù‡Ø°Ø§ Ù…ÙÙ…Ù‘ÙÙ†Ù’ ØªÙÙ†Ø§Ù„ÙÙ‡Ù Ù…ÙÙ†Ù’Ú©Ù ØµÙÙ„ÙÙˆØ§ØªÙŒ ÙˆÙ Ø±ÙØ­Ù’Ù…ÙØ©ÙŒ ÙˆÙ Ù…ÙØºÙ’ÙÙØ±ÙØ©ÙŒ. Ø§ÙÙ„Ù„Ù‘Ù‡ÙÙ…Ù‘Ù Ø§Ø¬Ù’Ø¹ÙÙ„Ù’ Ù…ÙØ­Ù’ÛŒØ§Ù‰Ù Ù…ÙØ­Ù’ÛŒØ§ Ù…ÙØ­ÙÙ…Ù‘ÙØ¯Ù ÙˆÙ Ø¢Ù„Ù Ù…ÙØ­ÙÙ…Ù‘ÙØ¯ÙØŒ ÙˆÙ Ù…ÙÙ…Ø§ØªÙ‰ Ù…ÙÙ…Ø§ØªÙ Ù…ÙØ­ÙÙ…Ù‘ÙØ¯Ù ÙˆÙ Ø¢Ù„Ù Ù…ÙØ­ÙÙ…Ù‘ÙØ¯Ù 
          
          Ø§ÙÙ„Ù„Ù‘Ù‡ÙÙ…Ù‘Ù Ø§ÙÙ†Ù‘Ù Ù‡Ø°Ø§ ÛŒÙÙˆÙ’Ù…ÙŒ ØªÙØ¨ÙØ±Ù‘ÙÚ©ÙØªÙ’ Ø¨ÙÙ‡ Ø¨ÙÙ†ÙÙˆ Ø§ÙÙ…ÙÛŒÙ‘ÙÙ‡ÙØŒ ÙˆÙ Ø§Ø¨Ù’Ù†Ù Ø¢Ú©ÙÙ„ÙØ©Ù Ø§Ù„Ù’Ø§Ù Ú©Ù’Ø¨Ø§Ø¯ÙØŒ Ø§ÙÙ„Ù„Ù‘ÙØ¹ÛŒÙ†Ù Ø§Ø¨Ù’Ù†Ù Ø§Ù„Ù„Ù‘ÙØ¹ÛŒÙ†ÙØŒ Ø¹ÙÙ„Ù‰ Ù„ÙØ³Ø§Ù†ÙÚ©Ù ÙˆÙ Ù„ÙØ³Ø§Ù†Ù Ù†ÙØ¨ÙÛŒÙÙ‘Ú©Ù ØµÙÙ„Ù‘ÙÙ‰ Ø§Ù„Ù„Ù‘Ù‡Ù Ø¹ÙÙ„ÙÛŒÙ’Ù‡Ù ÙˆÙ Ø¢Ù„ÙÙ‡ØŒ ÙÙ‰ Ú©ÙÙ„ÙÙ‘ Ù…ÙÙˆÙ’Ø·ÙÙ†Ù ÙˆÙ Ù…ÙÙˆÙ’Ù‚ÙÙÙ ÙˆÙÙ‚ÙÙÙ ÙÛŒÙ‡Ù Ù†ÙØ¨ÙÛŒÙ‘ÙÚ©Ù ØµÙÙ„Ù‘ÙÙ‰ Ø§Ù„Ù„Ù‘Ù‡Ù Ø¹ÙÙ„ÙÛŒÙ’Ù‡Ù ÙˆÙ Ø¢Ù„ÙÙ‡. Ø§ÙÙ„Ù„Ù‘Ù‡ÙÙ…Ù‘Ù Ø§Ù„Ù’Ø¹ÙÙ†Ù’ Ø§ÙØ¨Ø§Ø³ÙÙÙ’ÛŒØ§Ù†Ù ÙˆÙ Ù…ÙØ¹Ø§ÙˆÙÛŒÙØ©Ù ÙˆÙ ÛŒÙØ²ÛŒØ¯Ù Ø¨Ù’Ù†Ù Ù…ÙØ¹Ø§ÙˆÛŒÙØ©ÙØŒ Ø¹ÙÙ„ÙÛŒÙ’Ù‡ÙÙ…Ù’ Ù…ÙÙ†Ù’Ú©Ù Ø§Ù„Ù„Ù‘ÙØ¹Ù’Ù†ÙØ©Ù Ø§ÙØ¨ÙØ¯Ù Ø§Ù„Ø§Ù’Ø¨ÙØ¯ÛŒÙ†ÙØŒ ÙˆÙ Ù‡Ø°Ø§ ÛŒÙÙˆÙ’Ù…ÙŒ ÙÙØ±ÙØ­ÙØªÙ’ Ø¨ÙÙ‡ Ø¢Ù„Ùâ€ Ø²ÛŒØ§Ø¯Ù ÙˆÙ Ø¢Ù„Ùâ€ Ù…ÙØ±Ù’ÙˆØ§Ù†Ù Ø¨ÙÙ‚ÙØªÙ’Ù„ÙÙ‡ÙÙ…Ù Ø§Ù„Ù’Ø­ÙØ³ÙÛŒÙ’Ù†Ù ØµÙÙ„ÙÙˆØ§ØªÙ Ø§Ù„Ù„Ù‘Ù‡Ù Ø¹ÙÙ„ÙÛŒÙ’Ù‡Ù. Ø§ÙÙ„Ù„Ù‘Ù‡ÙÙ…Ù‘Ù ÙÙØ¶Ø§Ø¹ÙÙÙ’ Ø¹ÙÙ„ÙÛŒÙ’Ù‡ÙÙ…Ù Ø§Ù„Ù„Ù‘ÙØ¹Ù’Ù†Ù Ù…ÙÙ†Ù’Ú©Ù ÙˆÙ Ø§Ù„Ù’Ø¹ÙØ°Ø§Ø¨Ù Ø§Ù„Ø§ÙÙ„ÛŒÙ…Ù. Ø§ÙÙ„Ù„Ù‘Ù‡ÙÙ…Ù‘Ù Ø§ÙÙ†Ù‘Ù‰ Ø§ÙØªÙÙ‚ÙØ±Ù‘ÙØ¨Ù Ø§ÙÙ„ÙÛŒÙ’Ú©Ù ÙÙ‰ Ù‡Ø°ÙØ§ Ø§Ù„Ù’ÛŒÙÙˆÙ’Ù…ÙØŒ ÙˆÙ ÙÙ‰ Ù…ÙÙˆÙ’Ù‚ÙÙÙ‰ Ù‡Ø°Ø§ØŒ ÙˆÙ Ø§ÙÛŒÙ‘Ø§Ù…Ù Ø­ÙÛŒØ§ØªÙ‰ØŒ Ø¨ÙÙ€Ø§Ù„Ù’Ø¨ÙØ±Ø§Ø¦ÙØ©Ù Ù…ÙÙ†Ù’Ù‡ÙÙ…Ù’ ÙˆÙ Ø§Ù„Ù„Ù‘ÙØ¹Ù’Ù†ÙØ©Ù Ø¹ÙÙ„ÙÛŒÙ’Ù‡ÙÙ€Ù…Ù’ØŒ ÙˆÙ Ø¨ÙÙ€Ø§Ù„Ù’Ù…ÙÙˆØ§Ù„Ø§Ø©Ù Ù„ÙÙ†ÙØ¨ÙÛŒÙÙ‘Ú©Ù ÙˆÙ Ø¢Ù„Ù Ù†ÙØ¨ÙÛŒÙÙ‘Ú©Ù Ø¹ÙÙ„ÙÛŒÙ’Ù‡Ù ÙˆÙ Ø¹ÙÙ„ÙÛŒÙ’Ù‡ÙÙ…Ù Ø§Ù„Ø³Ù‘ÙÙ„Ø§Ù…Ù 
          
          ØµØ¯ Ù…Ø±ØªØ¨Ù‡ Ù…ÛŒ Ú¯ÙˆÛŒÛŒ : Ø§ÙÙ„Ù„Ù‘Ù‡ÙÙ…Ù‘Ù Ø§Ù„Ù’Ø¹ÙÙ†Ù’ Ø§ÙÙˆÙ‘ÙÙ„Ù Ø¸Ø§Ù„ÙÙ…Ù Ø¸ÙÙ„ÙÙ…Ù Ø­ÙÙ‚Ù‘Ù Ù…ÙØ­ÙÙ…Ù‘ÙØ¯Ù ÙˆÙ Ø¢Ù„Ù Ù…ÙØ­ÙÙ…Ù‘ÙØ¯ÙØŒ ÙˆÙ Ø¢Ø®ÙØ±Ù ØªØ§Ø¨ÙØ¹Ù Ù„ÙÙ‡Ù Ø¹ÙÙ„Ù‰ Ø°Ù„ÙÚ©Ù. Ø§ÙÙ„Ù„Ù‘Ù‡ÙÙ…Ù‘Ù Ø§Ù„Ù’Ø¹ÙÙ†Ù Ø§Ù„Ù’Ø¹ÙØµØ§Ø¨ÙØ©Ù Ø§Ù„Ù‘ÙØªÙ‰ Ø¬Ø§Ù‡ÙØ¯ÙØªÙ Ø§Ù„Ù’Ø­ÙØ³ÙÛŒÙ’Ù†ÙØŒ ÙˆÙ Ø´Ø§ÛŒÙØ¹ÙØªÙ’ ÙˆÙ Ø¨Ø§ÛŒÙØ¹ÙØªÙ’ ÙˆÙ ØªØ§Ø¨ÙØ¹ÙØªÙ’ Ø¹ÙÙ„Ù‰ Ù‚ÙØªÙ’Ù„ÙÙ‡. Ø§ÙÙ„Ù„Ù‘Ù‡ÙÙ…Ù‘Ù Ø§Ù„Ù’Ø¹ÙÙ†Ù’Ù‡ÙÙ…Ù’ Ø¬ÙÙ…ÛŒØ¹Ù‹Ø§ 
          
          ØµØ¯ Ù…Ø±ØªØ¨Ù‡ Ù…ÛŒ Ú¯ÙˆÛŒÛŒ : Ø§ÙÙ„Ø³Ù‘ÙÙ„Ø§Ù…Ù Ø¹ÙÙ„ÙÛŒÙ’Ú©Ù ÛŒØ§ Ø§ÙØ¨Ø§ Ø¹ÙØ¨Ù’Ø¯Ù Ø§Ù„Ù„Ù‘Ù‡ÙØŒ ÙˆÙ Ø¹ÙÙ„ÙÙ‰ Ø§Ù„Ù’Ø§ÙØ±Ù’ÙˆØ§Ø­Ù Ø§Ù„Ù‘ÙØªÙ‰ Ø­ÙÙ„Ù‘ÙØªÙ’ Ø¨ÙÙÙÙ†Ø§Ø¦ÙÚ©ÙØŒ Ø¹ÙÙ„ÙÛŒÙ’Ú©Ù Ù…ÙÙ†Ù‘Ù‰ Ø³ÙÙ„Ø§Ù…Ù Ø§Ù„Ù„Ù‘Ù‡Ù Ø§ÙØ¨ÙØ¯Ù‹Ø§ Ù…Ø§ Ø¨ÙÙ‚ÛŒØªÙ ÙˆÙ Ø¨ÙÙ‚ÙÙ‰Ù Ø§Ù„Ù„Ù‘ÙÛŒÙ’Ù„Ù ÙˆÙ Ø§Ù„Ù†Ù‘ÙÙ‡Ø§Ø±ÙØŒ ÙˆÙ Ù„Ø§ Ø¬ÙØ¹ÙÙ„ÙÙ‡Ù Ø§Ù„Ù„Ù‘Ù‡Ù Ø¢Ø®ÙØ±Ù Ø§Ù„Ù’Ø¹ÙÙ‡Ù’Ø¯Ù Ù…ÙÙ†Ù‘Ù‰ Ù„ÙØ²ÙÛŒØ§Ø±ÙØªÙÚ©ÙÙ…Ù’.
          
          Ø§ÙÙ„Ø³Ù‘ÙÙ„Ø§Ù…Ù Ø¹ÙÙ„ÙÙ‰ Ø§Ù„Ù’Ø­ÙØ³ÙÛŒÙ’Ù†Ù ÙˆÙ Ø¹ÙÙ„Ù‰ Ø¹ÙÙ„Ù‰ÙÙ‘ Ø¨Ù’Ù†Ù Ø§Ù„Ù’Ø­ÙØ³ÙÛŒÙ’Ù†Ù ÙˆÙ Ø¹ÙÙ„Ù‰ Ø§ÙÙˆÙ’Ù„Ø§Ø¯Ù Ø§Ù„Ù’Ø­ÙØ³ÙÛŒÙ’Ù†Ù ÙˆÙ Ø¹ÙÙ„Ù‰ Ø§ÙØµÙ’Ø­Ø§Ø¨Ù Ø§Ù„Ù’Ø­ÙØ³ÙÛŒÙ’Ù†Ù
          
          
          Ø³Ù¾Ø³ Ù…ÛŒ Ú¯ÙˆÛŒÛŒ : Ø§ÙÙ„Ù„Ù‘Ù‡ÙÙ…Ù‘Ù Ø®ÙØµÙ‘Ù Ø§ÙÙ†Ù’ØªÙ Ø§ÙÙˆÙ‘ÙÙ„Ù Ø¸Ø§Ù„ÙÙ…Ù Ø¨ÙØ§Ù„Ù„Ù‘ÙØ¹Ù’Ù†Ù Ù…ÙÙ†Ù‘Ù‰ØŒ ÙˆÙ Ø§Ø¨Ù’Ø¯ÙØ§Ù’ Ø¨ÙÙ‡ Ø§ÙÙˆÙ‘ÙÙ„Ø§Ù‹ Ø«ÙÙ…Ù‘Ù Ø§Ù„Ù’Ø¹ÙÙ†Ù Ø§Ù„Ø«Ù‘Ø§Ù†ÙÙ‰Ù ÙˆÙ Ø§Ù„Ø«Ù‘Ø§Ù„ÙØ«Ù ÙˆÙ Ø§Ù„Ø±Ù‘Ø§Ø¨ÙØ¹Ù. Ø§ÙÙ„Ù„Ù‘Ù‡ÙÙ…Ù‘Ù Ø§Ù„Ù’Ø¹ÙÙ†Ù’ ÛŒÙØ²ÛŒØ¯Ù Ø®Ø§Ù…ÙØ³Ø§Ù‹ØŒ ÙˆÙ Ø§Ù„Ù’Ø¹ÙÙ†Ù’ Ø¹ÙØ¨ÙÛŒÙ’Ø¯Ù Ø§Ù„Ù„Ù‘Ù‡Ù Ø¨Ù’Ù†Ù Ø²ÛŒØ§Ø¯Ù ÙˆÙ Ø§Ø¨Ù’Ù†Ù Ù…ÙØ±Ù’Ø¬Ø§Ù†ÙÙ‡ÙØŒ ÙˆÙ Ø¹ÙÙ…ÙØ±Ù Ø¨Ù’Ù†Ù Ø³ÙØ¹Ù’Ø¯Ù ÙˆÙ Ø´ÙÙ…Ù’Ø±Ø§Ù‹ØŒ ÙˆÙ Ø¢Ù„Ù Ø§ÙØ¨Ù‰ Ø³ÙÙÙ’ÛŒØ§Ù†Ù ÙˆÙ Ø¢Ù„Ù Ø²ÛŒØ§Ø¯Ù ÙˆÙ Ø¢Ù„Ù Ù…ÙØ±Ù’ÙˆØ§Ù†Ù Ø§ÙÙ„Ù‰ ÛŒÙÙˆÙ’Ù…Ù Ø§Ù„Ù’Ù‚ÙÛŒØ§Ù…ÙØ©Ù 
          
         Ø¯Ø± Ø­Ø§Ù„Øª Ø³Ø¬Ø¯Ù‡ Ù…ÛŒ Ú¯ÙˆÛŒÛŒ : Ø§ÙÙ„Ù„Ù‘Ù‡ÙÙ…Ù‘Ù Ù„ÙÚ©Ù Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ø­ÙÙ…Ù’Ø¯Ù Ø§Ù„Ø´Ù‘Ø§Ú©ÙØ±ÛŒÙ†Ù Ù„ÙÚ©Ù Ø¹ÙÙ„Ù‰ Ù…ÙØµØ§Ø¨ÙÙ‡ÙÙ…Ù’ØŒ Ø§ÙÙ„Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„Ù‘Ù‡Ù Ø¹ÙÙ„Ù‰ Ø¹ÙØ¸ÛŒÙ…Ù Ø±ÙØ²ÙÛŒÙ‘ÙØªÙ‰. Ø§ÙÙ„Ù„Ù‘Ù‡ÙÙ…Ù‘Ù Ø§Ø±Ù’Ø²ÙÙ‚Ù’Ù†Ù‰ Ø´ÙÙØ§Ø¹ÙØ©Ù Ø§Ù„Ù’Ø­ÙØ³ÙÛŒÙ’Ù†Ù ÛŒÙÙˆÙ’Ù…Ù Ø§Ù„Ù’ÙˆÙØ±ÙÙˆØ¯ÙØŒ ÙˆÙ Ø«ÙØ¨ÙÙ‘ØªÙ’ Ù„Ù‰ Ù‚ÙØ¯ÙÙ…Ù ØµÙØ¯Ù’Ù‚Ù Ø¹ÙÙ†Ù’Ø¯ÙÚ©Ù Ù…ÙØ¹Ù Ø§Ù„Ù’Ø­ÙØ³ÙÛŒÙ’Ù†Ù ÙˆÙ Ø§ÙØµÙ’Ø­Ø§Ø¨Ù Ø§Ù„Ù’Ø­ÙØ³ÙÛŒÙ’Ù†ÙØŒ Ø§ÙÙ„Ù‘ÙØ°ÛŒÙ†Ù Ø¨ÙØ°ÙÙ„ÙÙˆØ§ Ù…ÙÙ‡ÙØ¬ÙÙ‡ÙÙ…Ù’ Ø¯ÙÙˆÙ†Ù Ø§Ù„Ù’Ø­ÙØ³ÙÛŒÙ’Ù†Ù Ø¹ÙÙ„ÙÛŒÙ’Ù‡Ù Ø§Ù„Ø³Ù‘ÙÙ„Ø§Ù…Ù </p>
        <!-- Full Ziyarat text would go here -->
      </div>
      <div style="text-align:center; margin-top:30px;">
        <button class="btn" id="back-from-ziyarat">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
      </div>
    </div>
  </div>

  <div id="thirtyday-page" class="hidden" style="position:fixed; top:0; left:0; width:100%; height:100%; background:var(--bg); z-index:1001; padding:20px; overflow-y:auto;">
    <div style="max-width:800px; margin:0 auto;">
      <h2 style="text-align:center;">Ú¯Ø²Ø§Ø±Ø´ Û³Û° Ø±ÙˆØ² Ø§Ø®ÛŒØ±</h2>

      <div class="stat-grid">
        <div class="card stat">
          <div class="label">ØªØ¹Ø¯Ø§Ø¯ Ø«Ø¨Øªâ€ŒÙ‡Ø§</div>
          <div class="value" id="thirtyday-total">0</div>
        </div>
        <div class="card stat">
          <div class="label">Ø§ÙˆÙ„â€ŒÙˆÙ‚Øª (â‰¤ Û±Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡)</div>
          <div class="value success" id="thirtyday-ontime">0</div>
        </div>
        <div class="card stat">
          <div class="label">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† ØªØ§Ø®ÛŒØ± (Ø¯Ù‚ÛŒÙ‚Ù‡)</div>
          <div class="value danger" id="thirtyday-avg">0</div>
        </div>
      </div>

      <div class="grid" id="thirtyday-by-prayer"></div>
      <div class="muted" style="margin-top:10px;">ØªØ¹Ø§Ø±ÛŒÙ: Ø§ÙˆÙ„â€ŒÙˆÙ‚Øª â‰¤ Û±Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ØŒ Ù…Ø·Ù„ÙˆØ¨ â‰¤ Û¶Û° Ø¯Ù‚ÛŒÙ‚Ù‡ØŒ Ø¯ÛŒØ± &lt; Û´ Ø³Ø§Ø¹ØªØŒ Ø®ÛŒÙ„ÛŒ Ø¯ÛŒØ± â‰¥ Û´ Ø³Ø§Ø¹Øª</div>

      <div style="text-align:center; margin-top:30px;">
        <button class="btn" id="back-from-thirtyday">Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ</button>
      </div>
    </div>
  </div>

  <div id="help-page" class="hidden" style="position:fixed; top:0; left:0; width:100%; height:100%; background:var(--bg); z-index:1001; padding:20px; overflow-y:auto;">
    <div style="max-width:800px; margin:0 auto;">
      <h2 style="text-align:center;">Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡</h2>
      <div style="line-height:1.8; margin:20px 0;">
        <h3>Ù†Ø­ÙˆÙ‡ Ø§Ø³ØªÙØ§Ø¯Ù‡:</h3>
        <p>1. Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø§ÙˆÙ‚Ø§Øª Ø´Ø±Ø¹ÛŒ Ø±ÙˆØ² Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</p>
        <p>2. Ø¨Ø±Ø§ÛŒ Ø«Ø¨Øª Ù†Ù…Ø§Ø² Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ "Ø§Ù„Ø§Ù† Ø®ÙˆÙ†Ø¯Ù…" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯</p>
        <p>3. Ø¯Ø± ØµÙØ­Ù‡ Ú¯Ø²Ø§Ø±Ø´ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¹Ù…Ù„Ú©Ø±Ø¯ 7 Ø±ÙˆØ² Ø§Ø®ÛŒØ± Ø±Ø§ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù†ÛŒØ¯</p>
      </div>
      <div style="text-align:center; margin-top:30px;">
        <button class="btn" id="back-from-help">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
      </div>
    </div>
  </div>

  <script>
    // =============================
    // Tools Menu Functionality
    // =============================
    const toolsBtn = document.getElementById("tools-btn");
    const toolsMenu = document.getElementById("tools-menu");
    const toolsOverlay = document.getElementById("tools-overlay");
    const closeTools = document.getElementById("close-tools");

    toolsBtn.addEventListener("click", () => {
      toolsMenu.classList.remove("hidden");
      toolsOverlay.classList.remove("hidden");
      setTimeout(() => {
        toolsMenu.style.transform = "translateX(-300px)";
      }, 10);
    });

    closeTools.addEventListener("click", closeToolsMenu);
    toolsOverlay.addEventListener("click", closeToolsMenu);

    function closeToolsMenu() {
      toolsMenu.style.transform = "translateX(0)";
      setTimeout(() => {
        toolsMenu.classList.add("hidden");
        toolsOverlay.classList.add("hidden");
      }, 300);
    }

    // Salawat Counter
    const salawatBtn = document.getElementById("salawat-counter-btn");
    const salawatPage = document.getElementById("salawat-counter-page");
    const salawatCount = document.getElementById("salawat-count");
    const salawatAdd = document.getElementById("salawat-add");
    const backFromSalawat = document.getElementById("back-from-salawat");

    let count = 0;
    salawatBtn.addEventListener("click", () => {
      closeToolsMenu();
      salawatPage.classList.remove("hidden");
      count = 0;
      salawatCount.textContent = count;
    });

    salawatAdd.addEventListener("click", () => {
      count++;
      salawatCount.textContent = count;
    });

    backFromSalawat.addEventListener("click", () => {
      salawatPage.classList.add("hidden");
    });

    // Ziyarat Ashura
    const ziyaratBtn = document.getElementById("ziyarat-btn");
    const ziyaratPage = document.getElementById("ziyarat-page");
    const backFromZiyarat = document.getElementById("back-from-ziyarat");

    ziyaratBtn.addEventListener("click", () => {
      closeToolsMenu();
      ziyaratPage.classList.remove("hidden");
    });

    backFromZiyarat.addEventListener("click", () => {
      ziyaratPage.classList.add("hidden");
    });

    // 30-Day Report
    const thirtydayBtn = document.getElementById("thirtyday-btn");
    const thirtydayPage = document.getElementById("thirtyday-page");
    const backFromThirtyday = document.getElementById("back-from-thirtyday");
    let thirtydayCharts = [];

    thirtydayBtn.addEventListener("click", () => {
      closeToolsMenu();
      thirtydayPage.classList.remove("hidden");
      refreshThirtydayReport();
    });

    backFromThirtyday.addEventListener("click", () => {
      thirtydayPage.classList.add("hidden");
      thirtydayCharts.forEach(ch => ch.destroy());
      thirtydayCharts = [];
    });

    function refreshThirtydayReport() {
      const logs = loadLogs();
      const now = Date.now();
      const thirtyDaysMs = 29*86400000; // Ø§Ù…Ø±ÙˆØ² Ùˆ 29 Ø±ÙˆØ² Ù‚Ø¨Ù„
      const start = now - thirtyDaysMs;
      const recent = logs.filter(x => {
        const t = Date.parse(x.prayedUTC);
        return t >= start && t <= now;
      });

      const total = recent.length;
      const ontime = recent.filter(x => x.delayMin >= 0 && x.delayMin <= ONTIME_THRESHOLD_MIN).length;
      const positiveDelays = recent.filter(x=>x.delayMin>0).map(x=>x.delayMin);
      const avgDelay = positiveDelays.length ? Math.round(positiveDelays.reduce((s,v)=>s+v,0)/positiveDelays.length) : 0;

      document.getElementById("thirtyday-total").textContent = total;
      document.getElementById("thirtyday-ontime").textContent = ontime;
      document.getElementById("thirtyday-avg").textContent = avgDelay;

      // Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ + Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ÛŒ Ø¯Ø§ÛŒØ±Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ù†Ù…Ø§Ø²
      const labels = ["ØµØ¨Ø­","Ø¸Ù‡Ø±","Ù…ØºØ±Ø¨"];
      const container = document.getElementById("thirtyday-by-prayer");
      container.innerHTML = "";
      
      labels.forEach(n => {
        const arr = recent.filter(x=>x.prayer===n);
        const cnt = arr.length;
        const { onTime, good, late, vlate } = bucketsFor(arr);

        const card = document.createElement("div");
        card.className = "card prayer-report";

        const left = document.createElement("div");
        left.innerHTML = `
          <div class="flex gap12" style="align-items:center; justify-content:space-between;">
            <div style="font-weight:800">${n}</div>
          </div>
          <div class="chips" style="margin-top:10px;">
            <span class="chip">ØªØ¹Ø¯Ø§Ø¯: <span class="num">${cnt}</span></span>
            <span class="chip">Ø§ÙˆÙ„â€ŒÙˆÙ‚Øª: <span class="success num">${onTime}</span></span>
            <span class="chip">Ù…Ø·Ù„ÙˆØ¨: <span class="warn num">${good}</span></span>
            <span class="chip">Ø¯ÛŒØ±: <span class="num" style="color:orange">${late}</span></span>
            <span class="chip">Ø®ÛŒÙ„ÛŒ Ø¯ÛŒØ±: <span class="danger num">${vlate}</span></span>
          </div>
        `;

        const right = document.createElement("div");
        right.className = "center";
        const canvas = document.createElement("canvas");
        canvas.width = 160; canvas.height = 160;
        right.appendChild(canvas);

        card.appendChild(left);
        card.appendChild(right);
        container.appendChild(card);

        const ctx = canvas.getContext("2d");
        const chart = new Chart(ctx, {
          type: 'doughnut',
          data: {
            labels: ["Ø§ÙˆÙ„â€ŒÙˆÙ‚Øª","Ù…Ø·Ù„ÙˆØ¨","Ø¯ÛŒØ±","Ø®ÛŒÙ„ÛŒ Ø¯ÛŒØ±"],
            datasets: [{
              data: [onTime, good, late, vlate],
              backgroundColor: ['#22c55e','#f59e0b','#f97316','#ef4444'],
            }]
          },
          options: {
            responsive: false,
            cutout: '58%',
            plugins: {
              legend: { position: 'bottom', labels: { boxWidth: 14 } },
              tooltip: { intersect:false }
            }
          }
        });
        thirtydayCharts.push(chart);
      });
    }

    // Help Page
    const helpBtn = document.getElementById("help-btn");
    const helpPage = document.getElementById("help-page");
    const backFromHelp = document.getElementById("back-from-help");
    const themeBtn = document.getElementById("theme-btn");

    helpBtn.addEventListener("click", () => {
      closeToolsMenu();
      helpPage.classList.remove("hidden");
    });

    backFromHelp.addEventListener("click", () => {
      helpPage.classList.add("hidden");
    });

    // Theme Toggle
    themeBtn.addEventListener("click", () => {
      document.body.classList.toggle('light-theme');
      localStorage.setItem('theme', document.body.classList.contains('light-theme') ? 'light' : 'dark');
    });

    // Check saved theme preference
    if (localStorage.getItem('theme') === 'light') {
      document.body.classList.add('light-theme');
    }

    // =============================
    // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§ØµÙ„ÛŒ

    // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§ØµÙ„ÛŒ
    // =============================
    const TEHRAN_OFFSET_MIN = 210; // +03:30
    const TEHRAN_OFFSET_MS = TEHRAN_OFFSET_MIN * 60 * 1000;

    // Ù…Ø®ØªØµØ§Øª Ù…Ø´Ù‡Ø¯
    const COORDS = { lat: 36.2605, lon: 59.6168 };

    // API Ø§ÙˆÙ‚Ø§Øª Ø´Ø±Ø¹ÛŒ
    const ADHAN_ENDPOINT = "https://api.aladhan.com/v1/timings";

    // Ù„ÛŒØ³Øª Ù†Ù…Ø§Ø²Ù‡Ø§ÛŒ Ù…ÙˆØ±Ø¯Ù†ÛŒØ§Ø²
    const PRAYER_MAP = [
      { key: "Fajr",   label: "ØµØ¨Ø­" },
      { key: "Dhuhr",  label: "Ø¸Ù‡Ø±" },
      { key: "Maghrib",label: "Ù…ØºØ±Ø¨" }
    ];

    // Ø¢Ø³ØªØ§Ù†Ù‡â€ŒÙ‡Ø§ÛŒ ÙˆØ¶Ø¹ÛŒØª
    const ONTIME_THRESHOLD_MIN = 15; // Ø§ÙˆÙ„â€ŒÙˆÙ‚Øª â‰¤ 15
    const GOOD_THRESHOLD = 60;       // Ù…Ø·Ù„ÙˆØ¨ â‰¤ 60
    const LATE_RED_THRESHOLD = 240;  // Ø®ÛŒÙ„ÛŒ Ø¯ÛŒØ± â‰¥ 240 (4h)

    // =============================
    // Ú©Ù…Ú©â€ŒØªØ§Ø¨Ø¹â€ŒÙ‡Ø§
    // =============================
    const faDigits = "Û°Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹";
    function faToEn(str){ return String(str).replace(/[Û°-Û¹]/g, d => String(faDigits.indexOf(d))); }
    function pad(n){ return String(n).padStart(2,"0"); }

    const fmtPersianFull  = new Intl.DateTimeFormat("fa-IR-u-ca-persian",{year:"numeric",month:"long",day:"numeric"});
    const fmtPersianParts = new Intl.DateTimeFormat("fa-IR-u-ca-persian",{year:"numeric",month:"numeric",day:"numeric"});
    const fmtPersianMonth = new Intl.DateTimeFormat("fa-IR-u-ca-persian",{year:"numeric",month:"long"});

    function persianParts(date){
      const parts = fmtPersianParts.formatToParts(date);
      const m = {};
      for (const p of parts){
        if (p.type==="year")  m.jy = parseInt(faToEn(p.value),10);
        if (p.type==="month") m.jm = parseInt(faToEn(p.value),10);
        if (p.type==="day")   m.jd = parseInt(faToEn(p.value),10);
      }
      return m;
    }

    // --- ØªÙ‚ÙˆÛŒÙ… Ø¬Ù„Ø§Ù„ÛŒ â†” Ù…ÛŒÙ„Ø§Ø¯ÛŒ
    function div(a,b){ return Math.trunc(a/b); }
    function g2d(gy,gm,gd){ const a=div(14-gm,12), y=gy+4800-a, m=gm+12*a-3; return gd+div(153*m+2,5)+365*y+div(y,4)-div(y,100)+div(y,400)-32045; }
    function d2g(jdn){ let j=jdn+32044; let g=div(4*j+3,146097); j=j-div(146097*g,4); let y=div(4*j+3,1461); j=j-div(1461*y,4); let m=div(5*j+2,153); const gd=j-div(153*m+2,5)+1; const gm=m+3-12*div(m,10); const gy=100*g+y-4800+div(m,10); return [gy,gm,gd]; }
    function jalCal(jy){ const breaks=[-61,9,38,199,426,686,913,1172,1410,1635,1900,2048,2097,2192,2262,2324,2394,2456,2501,2557,2619,2706,2755,2816,2878,2942,2991,3047,3108,3170,3225,3280,3342,3404,3469,3531,3594,3656,3711,3771,3833,3895,3950,4008,4072];
      let bl=breaks.length, gy=jy+621, leapJ=-14, jp=breaks[0], jm,jump,leap,n,i;
      for(i=1;i<bl;i++){ jm=breaks[i]; jump=jm-jp; if(jy<jm) break; leapJ=leapJ+div(jump,33)*8+div((jump%33),4); jp=jm; }
      n=jy-jp; leapJ=leapJ+div(n,33)*8+div((n%33+3),4); if(((jump%33)===1)&&(jump-n===4)) leapJ+=1;
      let leapG=div(gy,4)-div((div(gy,100)+1)*3,4)-150; let march=20+leapJ-leapG;
      if((jump-n)<6) n=n-jump+div(jump+4,33)*33; leap=((((n+1)%33)-1)%4); if(leap===-1) leap=4;
      return { gy, march, leap: leap===0 };
    }
    function j2d(jy,jm,jd){ const r=jalCal(jy); return g2d(r.gy,3,r.march)+(jm-1)*31-div(jm,7)*(jm-7)+jd-1; }
    function d2j(jdn){ let gy,gm,gd; [gy,gm,gd]=d2g(jdn); let jy=gy-621; const r=jalCal(jy); const jdn1f=g2d(gy,3,r.march); let jd,jm,k; k=jdn-jdn1f;
      if(k>=0){ if(k<=185){ jm=1+div(k,31); jd=(k%31)+1; return [jy,jm,jd]; } else { k-=186; } }
      else { jy-=1; k+=179; if(r.leap) k+=1; }
      jm=7+div(k,30); jd=(k%30)+1; return [jy,jm,jd];
    }
    function jalaliToGregorian(jy,jm,jd){ return d2g(j2d(jy,jm,jd)); }
    function gregorianToJalali(gy,gm,gd){ return d2j(g2d(gy,gm,gd)); }

    // =============================
    // Ø§ÙˆÙ‚Ø§Øª Ø´Ø±Ø¹ÛŒ + Ú©Ø´
    // =============================
    const CACHE_KEY = "adhan_cache_v2";
    function loadCache(){ try{ return JSON.parse(localStorage.getItem(CACHE_KEY)||"{}"); }catch{ return {}; } }
    function saveCache(obj){ localStorage.setItem(CACHE_KEY, JSON.stringify(obj)); }

    async function getTimingsForGregorian(gy,gm,gd){
      const key = `${gy}-${pad(gm)}-${pad(gd)}`;
      const cache = loadCache();
      if (cache[key]) return cache[key];

      const url =
        `${ADHAN_ENDPOINT}/${pad(gd)}-${pad(gm)}-${gy}` +
        `?latitude=${COORDS.lat}&longitude=${COORDS.lon}` +
        `&method=99&methodSettings=17.7,4.5,14` +   // Tehran angles
        `&school=0&timezonestring=Asia/Tehran` +
        `&latitudeAdjustmentMethod=3` +
        `&tune=0,0,0,0,0,0,0,0,0`;

      const res = await fetch(url);
      if (!res.ok) throw new Error("API error");
      const json = await res.json();
      const t = json.data.timings;
      const keep = { Fajr:t.Fajr, Sunrise:t.Sunrise, Dhuhr:t.Dhuhr, Asr:t.Asr, Maghrib:t.Maghrib, Isha:t.Isha };
      const out = { gy,gm,gd, timings: keep };
      cache[key] = out; saveCache(cache);
      return out;
    }

    // ØªØ¨Ø¯ÛŒÙ„ Ø³Ø§Ø¹Øª Ù…Ø­Ù„ÛŒ ØªÙ‡Ø±Ø§Ù† ("HH:MM") Ø¨Ù‡ Date (UTC)
    function tehranLocalToUTCDate(gy,gm,gd,hhmm){
      const [hh,mm] = hhmm.split(":").map(v=>parseInt(v,10));
      const utcMs = Date.UTC(gy,gm-1,gd,hh,mm) - TEHRAN_OFFSET_MS;
      return new Date(utcMs);
    }

    // =============================
    // Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø«Ø¨Øªâ€ŒÙ‡Ø§
    // =============================
    const LOGS_KEY = "namaz_logs_v2";
    function loadLogs(){ try{ return JSON.parse(localStorage.getItem(LOGS_KEY)||"[]"); }catch{ return []; } }
    function saveLogs(arr){ localStorage.setItem(LOGS_KEY, JSON.stringify(arr)); }
    function logKey(jy,jm,jd,prayer){ return `${jy}-${jm}-${jd}-${prayer}`; }
    function getLog(jy,jm,jd,prayer){ return loadLogs().find(x=>x.id===logKey(jy,jm,jd,prayer)); }
    function addOrUpdateLog(rec){
      const all = loadLogs();
      const i = all.findIndex(x=>x.id===rec.id);
      if (i>=0) all[i] = rec; else all.push(rec);
      saveLogs(all); return rec;
    }

    // =============================
    // Ù†Ø§ÙˆØ¨Ø±ÛŒ ÙˆÛŒÙˆÙ‡Ø§
    // =============================
    const viewDays   = document.getElementById("view-days");
    const viewReport = document.getElementById("view-report");
    document.getElementById("nav-days").addEventListener("click", e=>{ e.preventDefault(); showView("days"); });
    document.getElementById("nav-report").addEventListener("click", e=>{ e.preventDefault(); showView("report"); refreshReport(); });
    function showView(name){
      if (name==="days"){ viewDays.classList.remove("hidden"); viewReport.classList.add("hidden"); }
      else { viewReport.classList.remove("hidden"); viewDays.classList.add("hidden"); }
    }

    // =============================
    // ÙˆØ¶Ø¹ÛŒØª Ù…Ø§Ù‡ Ø¬Ø§Ø±ÛŒ (Ø´Ù…Ø³ÛŒ)
    // =============================
    let currentJ = (()=>{ const p = persianParts(new Date()); return { jy:p.jy, jm:p.jm }; })();
    const daysGrid = document.getElementById("days-grid");
    const btnPrev = document.getElementById("btn-prev-month");
    const btnNext = document.getElementById("btn-next-month");

    btnPrev.addEventListener("click", ()=>{ currentJ.jm--; if(currentJ.jm<1){ currentJ.jm=12; currentJ.jy--; } renderMonth(); });
    btnNext.addEventListener("click", ()=>{ currentJ.jm++; if(currentJ.jm>12){ currentJ.jm=1; currentJ.jy++; } renderMonth(); });

    function buildJalaliMonth(jy,jm){
      const [gy,gm,gd] = jalaliToGregorian(jy,jm,1);
      let d = new Date(Date.UTC(gy,gm-1,gd,12,0,0));
      const days = [];
      while(true){
        const p = persianParts(d);
        if (p.jy!==jy || p.jm!==jm) break;
        days.push({ jy, jm, jd:p.jd, date:new Date(d) });
        d = new Date(d.getTime()+86400000);
        if (days.length>32) break;
      }
      return { jy, jm, label: fmtPersianMonth.format(new Date(Date.UTC(gy,gm-1,gd))), days };
    }
    function fmtPersianDayLabel(date){ return fmtPersianFull.format(date); }

    function renderMonth(){
      const m = buildJalaliMonth(currentJ.jy, currentJ.jm);
      const todayJ = persianParts(new Date());
      daysGrid.innerHTML = "";
      m.days.forEach(d=>{
        const a = document.createElement("a");
        a.href="#"; a.className="card day-card";
        if (d.jy===todayJ.jy && d.jm===todayJ.jm && d.jd===todayJ.jd){
          a.classList.add("today");
        }
        a.innerHTML = `<div class="day-title">${fmtPersianDayLabel(d.date)}</div><div class="muted">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø§ÙˆÙ‚Ø§Øª Ùˆ Ø«Ø¨Øª Ù†Ù…Ø§Ø²</div>`;
        a.addEventListener("click", e=>{ e.preventDefault(); openDay(d); });
        daysGrid.appendChild(a);
      });
    }

    // =============================
    // Ù¾Ù†Ù„ Ø±ÙˆØ² Ùˆ Ø±Ø¯ÛŒÙâ€ŒÙ‡Ø§
    // =============================
    const dayPanel    = document.getElementById("day-panel");
    const dayTitle    = document.getElementById("day-title");
    const prayersRows = document.getElementById("prayers-rows");
    const sunriseLine = document.getElementById("sunrise-line");

    async function openDay(d){
      const { jy, jm, jd } = d;
      const [gy,gm,gd] = jalaliToGregorian(jy,jm,jd);
      dayTitle.textContent = `${fmtPersianFull.format(new Date(Date.UTC(gy,gm-1,gd)))} â€“ Ø¨Ù‡ Ø§ÙÙ‚ Ù…Ø´Ù‡Ø¯`;
      dayPanel.classList.remove("hidden");
      prayersRows.innerHTML = `<div class="muted">Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª Ø§ÙˆÙ‚Ø§Øª Ø´Ø±Ø¹ÛŒ...</div>`;
      try{
        const { timings } = await getTimingsForGregorian(gy,gm,gd);
        prayersRows.innerHTML = "";
        PRAYER_MAP.forEach(({key,label})=>{
          const t = timings[key]; // "HH:MM"
          const adhanUTC = tehranLocalToUTCDate(gy,gm,gd,t);
          const row = buildPrayerRow({ jy, jm, jd, label, adhanLocal:t, adhanUTC, gy, gm, gd });
          prayersRows.appendChild(row);
        });
        sunriseLine.textContent = `Ø·Ù„ÙˆØ¹ Ø®ÙˆØ±Ø´ÛŒØ¯: ${timings.Sunrise}`;
      }catch(e){
        prayersRows.innerHTML = `<div class="danger">Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§ÙˆÙ‚Ø§Øª Ø´Ø±Ø¹ÛŒ. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.</div>`;
      }
      dayPanel.scrollIntoView({ behavior:"smooth", block:"start" });
    }

    function buildPrayerRow({ jy, jm, jd, label, adhanLocal, adhanUTC, gy, gm, gd }) {
      const div = document.createElement("div"); div.className="row";
      const id  = logKey(jy,jm,jd,label);
      const log = getLog(jy,jm,jd,label);

      const status = document.createElement("div");
      status.style.textAlign = "start";
      status.innerHTML = log ? fmtStatus(log.delayMin) : `<span class="muted">â€”</span>`;

      const timeEl = document.createElement("div");
      timeEl.className = "num";
      timeEl.textContent = adhanLocal;

      const btn = document.createElement("button");
      btn.className="btn primary"; btn.textContent="Ø§Ù„Ø§Ù† Ø®ÙˆÙ†Ø¯Ù…";

      // Ù‚ÙÙ„ ØªØ§Ø±ÛŒØ®â€ŒÙ‡Ø§ÛŒ ØºÛŒØ±Ø§Ù…Ø±ÙˆØ²
      const today = new Date(); today.setHours(0,0,0,0);
      const prayerDate = new Date(gy,gm-1,gd); prayerDate.setHours(0,0,0,0);

      // Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¯Ú©Ù…Ù‡: ÙÙ‚Ø· Ø§Ù…Ø±ÙˆØ² Ùˆ Ø¨Ø¯ÙˆÙ† Ø«Ø¨Øª Ù‚Ø¨Ù„ÛŒ
      if (prayerDate > today){ btn.disabled=true; btn.textContent="Ø¨Ø±Ø§ÛŒ Ø¢ÛŒÙ†Ø¯Ù‡"; }
      else if (prayerDate < today){ btn.disabled=true; btn.textContent="Ú¯Ø°Ø´ØªÙ‡"; }
      else if (log){ btn.disabled=true; btn.textContent="Ø«Ø¨Øª Ø´Ø¯"; }

      // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø«Ø¨Øª Ù‚Ø¨Ù„ Ø§Ø² Ø§Ø°Ø§Ù† (Ø¨Ø±Ø§ÛŒ Ø§Ù…Ø±ÙˆØ²)
      const nowUTC = new Date();
      if (!btn.disabled && prayerDate.getTime()===today.getTime() && nowUTC < adhanUTC){
        btn.disabled = true; btn.textContent = "Ù‡Ù†ÙˆØ² Ù†Ø±Ø³ÛŒØ¯Ù‡";
        const ms = adhanUTC.getTime() - nowUTC.getTime();
        setTimeout(()=>{
          const l = getLog(jy,jm,jd,label);
          if (!l){ btn.disabled=false; btn.textContent="Ø§Ù„Ø§Ù† Ø®ÙˆÙ†Ø¯Ù…"; }
        }, Math.max(ms, 0));
      }

      btn.addEventListener("click", ()=>{
        if (btn.disabled) return;
        const now = new Date();
        const diffMin = Math.round((now.getTime() - adhanUTC.getTime())/60000);
        const rec = {
          id, jy, jm, jd, prayer: label,
          adhanUTC: adhanUTC.toISOString(),
          prayedUTC: now.toISOString(),
          delayMin: diffMin
        };
        addOrUpdateLog(rec);
        status.innerHTML = fmtStatus(diffMin);
        btn.disabled = true; btn.textContent = "Ø«Ø¨Øª Ø´Ø¯";
        refreshReport();
      });

      const nameEl = document.createElement("div");
      nameEl.style.fontWeight = "800";
      nameEl.textContent = label;

      div.appendChild(nameEl);
      div.appendChild(timeEl);
      div.appendChild(btn);
      div.appendChild(status);
      return div;
    }

    // ÙˆØ¶Ø¹ÛŒØª Ø±Ù†Ú¯ÛŒ ØªØ§Ø®ÛŒØ±
    function fmtStatus(delayMin){
      const abs = Math.abs(delayMin);
      if (delayMin < 0) return `<span class="danger num">${abs} Ø¯Ù‚ÛŒÙ‚Ù‡ Ù‚Ø¨Ù„ Ø§Ø² Ø§Ø°Ø§Ù†</span>`;
      if (delayMin <= ONTIME_THRESHOLD_MIN){
        return `<span class="success num">${delayMin} Ø¯Ù‚ÛŒÙ‚Ù‡ - Ø§ÙˆÙ„ ÙˆÙ‚Øª</span>`;
      }
      if (delayMin <= GOOD_THRESHOLD){
        return `<span class="warn num">${delayMin} Ø¯Ù‚ÛŒÙ‚Ù‡ - Ù…Ø·Ù„ÙˆØ¨</span>`;
      }
      if (delayMin < LATE_RED_THRESHOLD){
        return `<span style="color:orange" class="num">${delayMin} Ø¯Ù‚ÛŒÙ‚Ù‡ - Ø¯ÛŒØ±</span>`;
      }
      return `<span class="danger num">${delayMin} Ø¯Ù‚ÛŒÙ‚Ù‡ - Ø®ÛŒÙ„ÛŒ Ø¯ÛŒØ±</span>`;
    }

    // =============================
    // Ú¯Ø²Ø§Ø±Ø´ Û· Ø±ÙˆØ²Ù‡ + Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ÛŒ Ø¯Ø§ÛŒØ±Ù‡â€ŒØ§ÛŒ
    // =============================
    const statTotal = document.getElementById("stat-total");
    const statOntime= document.getElementById("stat-ontime");
    const statAvg   = document.getElementById("stat-avg");
    const byPrayer  = document.getElementById("by-prayer");
    const btnClear  = document.getElementById("btn-clear-logs");

    let pieCharts = [];

    btnClear.addEventListener("click", ()=>{
      if (confirm("Ù‡Ù…Ù‡ Ø«Ø¨Øªâ€ŒÙ‡Ø§ Ù¾Ø§Ú© Ø´ÙˆÙ†Ø¯ØŸ")){
        localStorage.removeItem(LOGS_KEY);
        refreshReport();
      }
    });

    function bucketsFor(arr){
      const onTime = arr.filter(x=>x.delayMin>=0 && x.delayMin<=ONTIME_THRESHOLD_MIN).length;
      const good   = arr.filter(x=>x.delayMin>ONTIME_THRESHOLD_MIN && x.delayMin<=GOOD_THRESHOLD).length;
      const late   = arr.filter(x=>x.delayMin>GOOD_THRESHOLD && x.delayMin<LATE_RED_THRESHOLD).length;
      const vlate  = arr.filter(x=>x.delayMin>=LATE_RED_THRESHOLD).length;
      return { onTime, good, late, vlate };
    }

    function refreshReport(){
      // ØªØ®Ø±ÛŒØ¨ Ú†Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ
      pieCharts.forEach(ch => ch.destroy());
      pieCharts = [];

      const logs = loadLogs();
      const now = Date.now();
      const sevenDaysMs = 6*86400000; // Ø§Ù…Ø±ÙˆØ² Ùˆ 6 Ø±ÙˆØ² Ù‚Ø¨Ù„
      const start = now - sevenDaysMs;
      const recent = logs.filter(x=>{
        const t = Date.parse(x.prayedUTC);
        return t >= start && t <= now;
      });

      const total = recent.length;
      const ontime = recent.filter(x => x.delayMin >= 0 && x.delayMin <= ONTIME_THRESHOLD_MIN).length;
      const positiveDelays = recent.filter(x=>x.delayMin>0).map(x=>x.delayMin);
      const avgDelay = positiveDelays.length ? Math.round(positiveDelays.reduce((s,v)=>s+v,0)/positiveDelays.length) : 0;

      statTotal.textContent = total;
      statOntime.textContent = ontime;
      statAvg.textContent    = avgDelay;

      // Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ + Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ÛŒ Ø¯Ø§ÛŒØ±Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ù†Ù…Ø§Ø²
      const labels = ["ØµØ¨Ø­","Ø¸Ù‡Ø±","Ù…ØºØ±Ø¨"];
      byPrayer.innerHTML = "";
      labels.forEach(n=>{
        const arr = recent.filter(x=>x.prayer===n);
        const cnt = arr.length;
        const { onTime, good, late, vlate } = bucketsFor(arr);

        const card = document.createElement("div");
        card.className = "card prayer-report";

        const left = document.createElement("div");
        left.innerHTML = `
          <div class="flex gap12" style="align-items:center; justify-content:space-between;">
            <div style="font-weight:800">${n}</div>
          </div>
          <div class="chips" style="margin-top:10px;">
            <span class="chip">ØªØ¹Ø¯Ø§Ø¯: <span class="num">${cnt}</span></span>
            <span class="chip">Ø§ÙˆÙ„â€ŒÙˆÙ‚Øª: <span class="success num">${onTime}</span></span>
            <span class="chip">Ù…Ø·Ù„ÙˆØ¨: <span class="warn num">${good}</span></span>
            <span class="chip">Ø¯ÛŒØ±: <span class="num" style="color:orange">${late}</span></span>
            <span class="chip">Ø®ÛŒÙ„ÛŒ Ø¯ÛŒØ±: <span class="danger num">${vlate}</span></span>
          </div>
        `;

        const right = document.createElement("div");
        right.className = "center";
        const canvas = document.createElement("canvas");
        canvas.width = 160; canvas.height = 160;
        right.appendChild(canvas);

        card.appendChild(left);
        card.appendChild(right);
        byPrayer.appendChild(card);

        const ctx = canvas.getContext("2d");
        const chart = new Chart(ctx, {
          type: 'doughnut',
          data: {
            labels: ["Ø§ÙˆÙ„â€ŒÙˆÙ‚Øª","Ù…Ø·Ù„ÙˆØ¨","Ø¯ÛŒØ±","Ø®ÛŒÙ„ÛŒ Ø¯ÛŒØ±"],
            datasets: [{
              data: [onTime, good, late, vlate],
              backgroundColor: ['#22c55e','#f59e0b','#f97316','#ef4444'],
            }]
          },
          options: {
            responsive: false,
            cutout: '58%',
            plugins: {
              legend: { position: 'bottom', labels: { boxWidth: 14 } },
              tooltip: { intersect:false }
            }
          }
        });
        pieCharts.push(chart);
      });
    }
    let isPlaying = false; // ÙˆØ¶Ø¹ÛŒØª ØµØ¯Ø§

  function toggleSound() {
    let audio = document.getElementById("bg-music");
    let btn = document.getElementById("sound-btn");

    if (!isPlaying) {
      audio.volume = 0.1; // ØµØ¯Ø§ÛŒ Ú©Ù…
      audio.play();
      btn.innerHTML = "ğŸ”Š"; // ØªØºÛŒÛŒØ± Ø¨Ù‡ Ø¨ÛŒâ€ŒØµØ¯Ø§
      isPlaying = true;
    } else {
      audio.pause();
      btn.innerHTML = "ğŸ”‡"; // ØªØºÛŒÛŒØ± Ø¨Ù‡ Ø¨Ù„Ù†Ø¯Ú¯Ùˆ
      isPlaying = false;
    }
  }
    // =============================
    // Ø´Ø±ÙˆØ¹
    // =============================
    function init(){ showView("days"); renderMonth(); refreshReport(); }
    renderMonth = renderMonth; // keep reference (no-op)
    init();
  </script>
</body>
</html>
